<html>
<head>
  <link rel="stylesheet" href="./reset.css">
  <link rel="stylesheet" href="./style.css">
  <script type="text/javascript" src="./jquery-3.2.1.min.js"></script>
</head>
<body>
  <div id="content">
    <h1>Weather</h1>

    <form class="theForm">
      <label>Location (zip/postal code)
        <input type="text" name="location" id="location" />
      </label>
      <input type="submit" />
    </form>

    <section>
      <h2>Report</h2>
      <p id="report"></p>
    </section>
  </div>

  <script type="text/javascript">

$( ".theForm" ).ready(function() {

  $('.theForm').submit( function(e) {
    var loc = $("#location").val().trim();
    var templ="";

    if ( loc !== "" ){
      var url = "http://70.32.24.233/cgi-bin/weather/fetch.pl?q=" + loc;
      $.getJSON( url, function( data ){
          var dispInfo = { name:data.location.Details.DMA.EnglishName,
                           geo:data.location.GeoPosition.Latitude + ", " +
                               data.location.GeoPosition.Longitude,
                           elev:data.location.GeoPosition.Elevation.Imperial.Value + " " +
                                data.location.GeoPosition.Elevation.Imperial.Unit,
                           timezone:data.location.TimeZone.Code,
                           isDay:data.weather.IsDayTime,
                           link:data.weather.Link,
                           temp:data.weather.Temperature.Imperial.Value + " " +
                                data.weather.Temperature.Imperial.Unit,
                           weatherText:data.weather.weatherText,
                           weatherIcon:data.weather.weatherIcon };
          console.log(dispInfo);
      });
    }

    e.preventDefault();
  });

});

  </script>

</body>
</html>
